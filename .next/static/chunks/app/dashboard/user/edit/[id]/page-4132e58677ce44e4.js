(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{6860:function(e,a,t){Promise.resolve().then(t.bind(t,1441))},1441:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return S}});var s=t(7437),r=t(2265),i=t(9050),l=t(4696),n=t(3002),u=t(9046),d=t(9931),c=t(4280),o=t(1833),m=t(6726),f=t(4033),h=t(6847),b=t(6820),p=t.n(b),g=t(7342),x=t.n(g),k=t(4589),j=t.n(k);function S(e){let{params:a}=e,t=(0,f.useRouter)(),b=x()(p()),[g,k]=(0,r.useState)({value:{id:0,name:"silahkan Memilih role user"},label:"silahkan Memilih Role user"}),[S,v]=(0,r.useState)(""),[w,y]=(0,r.useState)(""),[N,_]=(0,r.useState)(""),[E,P]=(0,r.useState)(""),[L,R]=(0,r.useState)(!1),[V,Z]=(0,r.useState)({}),[q,A]=(0,r.useState)(!1),[C,D]=(0,r.useState)(!1),[M,O]=(0,r.useState)(!1),[U,B]=(0,r.useState)(null),[I,Q]=(0,r.useState)(null),[F,G]=(0,r.useState)(""),[J,$]=(0,r.useState)(!1),[z,H]=(0,r.useState)(!1),[K,T]=(0,r.useState)(!1),W=async()=>{try{D(!0);let e=JSON.parse(localStorage.getItem("menu")),t=e.find(e=>"User"===e.name),s=await i.Z.getSelectedAksesMenu(t.id);if(console.log(s),s){Z({...s});let e=await (0,l.R_)(a.id);e&&(v(e.id),y(e.name),_(e.username),k({value:{id:e.id_role,name:e.name_role},label:e.name_role}))}D(!1)}catch(e){D(!1),console.log(e)}},X=async e=>{try{if(e.preventDefault(),A(!0),$(!1),H(!1),T(!1),j().isLength(w,{min:3})){if(/select|insert|update|delete|drop table|create table|alter table/i.test(w))B("name tidak bisa berupa SQL"),A(!1),$(!0);else if(j().isLength(N,{min:3})){if(/select|insert|update|delete|drop table|create table|alter table/i.test(N))Q("username tidak bisa berupa SQL"),A(!1),H(!0);else if(/[<>{}()[\]%&!$#^|\\/*?"=]/i.test(N))Q("username tidak boleh memakai simbol"),A(!1),setIsError(!0);else if(E)j().isLength(E,{min:8})||(G("Password harus minimal 8 karakter huruf"),A(!1),T(!0));else if(0===g.value.id)A(!1),b.fire({icon:"error",title:"Anda harus memilih role user terlebih dahulu"});else if(E){let e={id:S,name:w,username:N,id_role:g.value.id,password:E},a=await (0,l.eP)(e);a.status&&b.fire({icon:"success",title:"Berhasil mengubah user"})}else{let e={id:S,name:w,username:N,id_role:g.value.id},a=await (0,l.eP)(e);a.status&&b.fire({icon:"success",title:"Berhasil mengubah user"})}}else Q("username minimal panjang 3 huruf"),A(!1),H(!0)}else B("name minimal panjang 3 huruf"),A(!1),$(!0);A(!1)}catch(e){A(!1),b.fire({icon:"error",title:"Gagal mengubah user"})}};return(0,r.useEffect)(()=>{W()},[]),(0,s.jsx)(s.Fragment,{children:C?(0,s.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,s.jsx)(h.Z,{})}):V&&1===V.act_update?(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Z,{title:"Edit User"}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(u.D,{name:"kembali",action:()=>{t.replace("/dashboard/user")}})}),(0,s.jsxs)("form",{onSubmit:X,children:[(0,s.jsx)(d.c,{value:g,setValue:k}),(0,s.jsx)(n.y,{value:w,setValue:y,isRequire:!0,name:"Nama",placeholder:"name",id:"name",isError:J,keterangan:U}),(0,s.jsx)(n.y,{value:N,setValue:_,isRequire:!0,name:"Username",placeholder:"username",id:"username",isError:z,keterangan:I}),(0,s.jsx)(m.Z,{title:"password",value:M,setValue:O}),M&&(0,s.jsx)(o.y,{value:E,setValue:P,isRequire:!0,isShowPassword:L,setisShowPassword:R,isError:K,keterangan:F,name:"Password"}),(0,s.jsx)(u.D,{name:"Edit",width:"w-full",isLoading:q,type:"submit"})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("span",{children:"Anda tidak memiliki akses"})})})}},6726:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var s=t(7437);function r(e){let{title:a,value:t,setValue:r,disable:i=!1}=e;return(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{checked:t,type:"checkbox",value:t,onChange:e=>r(!t),className:"sr-only peer",disabled:i}),(0,s.jsx)("div",{className:"   w-11    h-6    bg-gray-200    peer-focus:outline-none    peer-focus:ring-4    peer-focus:ring-blue-300    dark:peer-focus:ring-blue-800    rounded-full peer    dark:bg-gray-700    peer-checked:after:translate-x-full    peer-checked:after:border-white after:content-['']    after:absolute    after:top-[2px]    after:left-[2px]    after:bg-white    after:border-gray-300    after:border    after:rounded-full    after:h-5    after:w-5    after:transition-all    dark:border-gray-600    peer-checked:bg-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:a})]})})}}},function(e){e.O(0,[929,750,698,589,401,319,70,971,596,744],function(){return e(e.s=6860)}),_N_E=e.O()}]);