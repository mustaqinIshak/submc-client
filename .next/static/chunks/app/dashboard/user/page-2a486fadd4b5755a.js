(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[679],{2970:function(e,a,t){Promise.resolve().then(t.bind(t,9556))},4696:function(e,a,t){"use strict";t.d(a,{Md:function(){return l},R_:function(){return o},Ue:function(){return c},Y8:function(){return r},eP:function(){return i},h8:function(){return d},yC:function(){return n}});var s=t(6979);async function r(e){try{let a=await (0,s.Z)({method:"post",url:"/userAll",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit}});return a.data}catch(e){throw e}}async function n(e){try{let a=await (0,s.Z)({method:"post",url:"/userAll",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit,search:e.search}});if(a.data.status)return a.data.data}catch(e){throw e}}async function l(e){try{let a=await (0,s.Z)({method:"post",url:"/userAll?page=".concat(e.number),headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit,search:e.search}});if(a.data.status)return a.data.data}catch(e){throw e}}async function o(e){try{let a=await (0,s.Z)({method:"post",url:"/user",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:e}});if(a.data.status)return a.data.data}catch(e){throw e}}async function c(e){try{let a=await (0,s.Z)({method:"post",url:"/addUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{name:e.name,username:e.username,password:e.password,id_role:e.id_role}});return a.data}catch(t){let e=[];t.response.data.name&&t.response.data.name.map(a=>{e.push(a)}),t.response.data.username&&t.response.data.username.map(a=>{e.push(a)}),t.response.data.password&&t.response.data.password.map(a=>{e.push(a)}),t.response.data.id_role&&t.response.data.id_role.map(a=>{e.push(a)});let a=e.join("");throw a}}async function i(e){try{let a=await (0,s.Z)({method:"post",url:"/editUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:e});return a.data}catch(t){let e=[];t.response.data.id&&t.response.data.id.map(a=>{e.push(a)}),t.response.data.name&&t.response.data.name.map(a=>{e.push(a)}),t.response.data.username&&t.response.data.username.map(a=>{e.push(a)}),t.response.data.password&&t.response.data.password.map(a=>{e.push(a)}),t.response.data.id_role&&t.response.data.id_role.map(a=>{e.push(a)});let a=e.join("");throw a}}async function d(e){try{let a=await (0,s.Z)({method:"post",url:"/deleteUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:e}});if(a.data.status)return Promise;throw a.data.message}catch(e){throw e}}},9556:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var s=t(7437),r=t(2265),n=t(9050),l=t(2510),o=t(1275),c=t(4696),i=t(5844),d=t(6820),u=t.n(d),h=t(7342),m=t.n(h),p=t(6847),g=t(7987),f=t(4033);function x(e){let{aksesEdit:a=0,aksesDelete:t=0}=e,n=(0,f.useRouter)(),d=m()(u()),[h,x]=(0,r.useState)([]),[y,w]=(0,r.useState)(1),[j,b]=(0,r.useState)(""),[k,A]=(0,r.useState)(!1),[N,_]=(0,r.useState)(10),[S,v]=(0,r.useState)(0),[C,Z]=(0,r.useState)(1),[B,U]=(0,r.useState)(1),[O,I]=(0,r.useState)(!1),z=(e,a)=>{d.fire({title:'Apakah anda yakin ingin menghapus data ini dengan nama username "'.concat(a,'" ?'),text:"Anda tidak bisa mengembalikan data ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&(0,c.h8)(e).then(()=>{I(!O),d.fire("Deleted!","Data berhasil di hapus","success")},e=>{I(!O),d.fire({icon:"error",title:"Gagal Menghapus user"})})})},E=e=>{n.replace("/dashboard/user/edit/".concat(e))},M=async()=>{try{A(!0);let e=await (0,c.Y8)({limit:N});e.data.length&&(x([...e.data]),v(e.total),Z(e.from),U(e.last_page)),A(!1)}catch(e){A(!1),d.fire({icon:"error",title:"Gagal mengambil data user"})}},G=async()=>{try{A(!0);let e=await (0,c.yC)({limit:N,search:j});e.data.length&&(x([...e.data]),v(e.total),Z(e.from),U(e.last_page)),A(!1)}catch(e){A(!1),d.fire({icon:"error",title:"Gagal mengambil data user"})}},D=async()=>{if(y!==C)try{A(!0);let e=y-1;w(e);let a=await (0,c.Md)({limit:N,search:j,number:e});a.data.length&&(x([...a.data]),v(a.total),U(a.last_page)),A(!1)}catch(e){A(!1),d.fire({icon:"error",title:"Gagal mengambil data user"})}},R=async()=>{if(y!==B)try{A(!0);let e=y+1;w(e);let a=await (0,c.Md)({limit:N,search:j,number:e});a.data.length&&(x([...a.data]),v(a.total),U(a.last_page)),A(!1)}catch(e){A(!1),d.fire({icon:"error",title:"Gagal mengambil data user"})}},H=async e=>{try{A(!0),w(e);let a=await (0,c.Md)({limit:N,search:j,number:e});a.data.length&&(x([...a.data]),v(a.total),U(a.last_page)),A(!1)}catch(e){A(!1),d.fire({icon:"error",title:"Gagal mengambil data user"})}};return(0,r.useEffect)(()=>{M()},[N,O]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:k?(0,s.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,s.jsx)(p.Z,{})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 lg:flex lg:flex-row  lg:justify-between mb-6",children:[(0,s.jsx)(i.M,{value:N,setValue:_,id:"limit"}),(0,s.jsx)(o.Z,{value:j,setValue:b,action:G})]}),(0,s.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Username"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Role User"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Aksi"})]})}),(0,s.jsx)("tbody",{children:h&&h.map((e,r)=>(0,s.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,s.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.username}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.name_role}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[1===a&&(0,s.jsx)(l.mTE,{className:"text-yellow-500 text-xl",onClick:()=>E(e.id)}),1===t&&(0,s.jsx)(l.r9e,{className:"text-red-500 text-xl",onClick:()=>z(e.id,e.username)})]})})]},r))})]}),(0,s.jsx)(g.Z,{first:C,last:B,pageNumber:y,pageHandle:H,previousHandle:D,nextHandle:R})]})})})}var y=t(9046),w=t(4280);function j(){let e=(0,f.useRouter)(),[a,t]=(0,r.useState)({}),[l,o]=(0,r.useState)(!1),c=async()=>{try{o(!0);let e=JSON.parse(localStorage.getItem("menu")),a=e.find(e=>"User"===e.name),s=await n.Z.getSelectedAksesMenu(a.id);console.log(s),s&&t({...s}),o(!1)}catch(e){o(!1),console.log(e)}};return(0,r.useEffect)(()=>{c()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{title:"User"}),l?(0,s.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,s.jsx)(p.Z,{})}):a&&1===a.act_read?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[a&&1===a.act_create&&(0,s.jsxs)("div",{className:"w-full flex justify-start mb-6",children:[(0,s.jsx)(y.D,{name:"Tambah User",action:()=>{e.replace("/dashboard/user/create")}}),(0,s.jsx)(y.D,{name:"Role User",action:()=>{e.replace("/dashboard/roleUser")}})]}),(0,s.jsx)(x,{aksesDelete:a.act_delete,aksesEdit:a.act_update})]}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("span",{children:"Anda tidak memiliki akses"})})]})}}},function(e){e.O(0,[306,750,698,885,971,596,744],function(){return e(e.s=2970)}),_N_E=e.O()}]);