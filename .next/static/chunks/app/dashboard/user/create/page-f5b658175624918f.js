(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{1587:function(e,a,s){Promise.resolve().then(s.bind(s,1579))},1579:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x}});var t=s(7437),i=s(2265),r=s(9050),l=s(4696),n=s(3002),u=s(9046),m=s(9931),c=s(4280),o=s(1833),d=s(4033),h=s(6847),f=s(6820),b=s.n(f),k=s(7342),S=s.n(k),j=s(4589),p=s.n(j);function x(){let e=(0,d.useRouter)(),a=S()(b()),[s,f]=(0,i.useState)({value:{id:0,name:"silahkan Memilih role user"},label:"silahkan Memilih Role user"}),[k,j]=(0,i.useState)(""),[x,g]=(0,i.useState)(""),[v,w]=(0,i.useState)(""),[y,E]=(0,i.useState)(!1),[N,_]=(0,i.useState)({}),[L,M]=(0,i.useState)(!1),[R,P]=(0,i.useState)(!1),[C,U]=(0,i.useState)(null),[V,q]=(0,i.useState)(null),[A,D]=(0,i.useState)(""),[O,Z]=(0,i.useState)(!1),[I,Q]=(0,i.useState)(!1),[B,F]=(0,i.useState)(!1),J=async()=>{try{P(!0);let e=JSON.parse(localStorage.getItem("menu")),a=e.find(e=>"User"===e.name),s=await r.Z.getSelectedAksesMenu(a.id);console.log(s),s&&_({...s}),P(!1)}catch(e){P(!1),console.log(e)}},$=async e=>{try{if(e.preventDefault(),M(!0),Z(!1),Q(!1),F(!1),p().isLength(k,{min:3})){if(/select|insert|update|delete|drop table|create table|alter table/i.test(x))U("username tidak bisa berupa SQL"),M(!1),Z(!0);else if(p().isLength(x,{min:3})){if(/select|insert|update|delete|drop table|create table|alter table/i.test(x))q("username tidak bisa berupa SQL"),M(!1),Q(!0);else if(/[<>{}()[\]%&!$#^|\\/*?"=]/i.test(x))q("username tidak boleh memakai simbol"),M(!1),setIsError(!0);else if(p().isLength(v,{min:8})){if(0===s.value.id)M(!1),a.fire({icon:"error",title:"Anda harus memilih role user terlebih dahulu"});else{let e={name:k,username:x,password:v,id_role:s.value.id},t=await (0,l.Ue)(e);t.status&&(a.fire({icon:"success",title:"Berhasil Menambahkan user"}),j(""),g(""),w(""),f({value:{id:0,name:"silahkan Memilih role user"},label:"silahkan Memilih Role user"}),M(!1))}}else D("Password harus minimal 8 karakter huruf"),M(!1),F(!0)}else q("username minimal panjang 3 huruf"),M(!1),Q(!0)}else U("username minimal panjang 3 huruf"),M(!1),Z(!0)}catch(e){M(!1),a.fire({icon:"error",title:e})}};return(0,i.useEffect)(()=>{J()},[]),(0,t.jsx)(t.Fragment,{children:R?(0,t.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,t.jsx)(h.Z,{})}):N&&1===N.act_create?(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Z,{title:"Create User"}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(u.D,{name:"kembali",action:()=>{e.replace("/dashboard/user")}})}),(0,t.jsxs)("form",{onSubmit:$,children:[(0,t.jsx)(m.c,{value:s,setValue:f}),(0,t.jsx)(n.y,{value:k,setValue:j,isRequire:!0,name:"Nama",placeholder:"name",id:"name",isError:O,keterangan:C}),(0,t.jsx)(n.y,{value:x,setValue:g,isRequire:!0,name:"Username",placeholder:"username",id:"username",isError:I,keterangan:V}),(0,t.jsx)(o.y,{value:v,setValue:w,isRequire:!0,isShowPassword:y,setisShowPassword:E,isError:B,keterangan:A,name:"Password"}),(0,t.jsx)(u.D,{name:"Create",width:"w-full",isLoading:L,type:"submit"})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("span",{children:"Anda tidak memiliki akses"})})})}}},function(e){e.O(0,[929,750,698,589,401,319,70,971,596,744],function(){return e(e.s=1587)}),_N_E=e.O()}]);