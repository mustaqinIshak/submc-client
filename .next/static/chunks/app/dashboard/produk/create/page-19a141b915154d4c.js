(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{3410:function(e,a,l){Promise.resolve().then(l.bind(l,9937))},9937:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return K}});var s=l(7437),t=l(2265),i=l(9050),n=l(4193),u=l(5530),r=l(3002),d=l(6726),m=l(7849),c=l(9046),h=l(4931);function o(e){let{sizes:a,nameSize:l,setNameSize:t,jumlahSize:i,SetJumlahSize:n,handleAddSize:u,handleDeleteSize:d,isError:o,keterangan:p}=e;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{htmlFor:"input-group-1",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Add Size"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-6 items-center",children:[(0,s.jsx)(r.y,{name:"Nama Size",value:l,setValue:t,isRequire:!1}),(0,s.jsx)(m.j,{name:"Jumlah",value:i,setValue:n,isRequire:!1}),(0,s.jsx)("div",{children:(0,s.jsx)(c.D,{type:"button",name:"Tambah",action:u})})]}),o&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-500",children:p}),a.length?(0,s.jsx)("div",{className:"flex flex-col gap-6 w-full bg-slate-300 p-4 rounded-lg mb-6",children:a.map((e,a)=>(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-6 w-full p-4 bg-slate-50 rounded-md",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{className:" block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Name:"}),(0,s.jsxs)("span",{children:[" ",e.name," "]})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("label",{className:" block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Jumlah:"}),(0,s.jsxs)("span",{children:[" ",e.jumlah," "]})]}),(0,s.jsx)(h.Z,{action:()=>d(a),name:"Hapus"})]},a))}):null]})}var p=l(4910),x=l(901),f=l(679),k=l(2304),S=l(7060),j=l(6974),g=l(4280),b=l(4033),v=l(6847),w=l(6820),N=l.n(w),y=l(7342),M=l.n(y),R=l(4589),V=l.n(R),E=l(3572);function K(){let e=(0,b.useRouter)(),a=M()(N()),[l,m]=(0,t.useState)({}),[h,w]=(0,t.useState)(""),[y,R]=(0,t.useState)(""),[K,Z]=(0,t.useState)({value:{id:0,name:"silahkan Memilih Kategori"},label:"silahkan Memilih Kategori"}),[q,z]=(0,t.useState)({value:{id:0,name:"silahkan Memilih Sub Kategori"},label:"silahkan Memilih Sub Kategori"}),[D,A]=(0,t.useState)(""),[C,_]=(0,t.useState)(""),[H,J]=(0,t.useState)(""),[P,T]=(0,t.useState)(""),[B,L]=(0,t.useState)(""),[O,F]=(0,t.useState)([]),[I,U]=(0,t.useState)([]),[W,G]=(0,t.useState)(1),[Q,X]=(0,t.useState)([]),[Y,$]=(0,t.useState)(""),[ee,ea]=(0,t.useState)("0"),[el,es]=(0,t.useState)(!1),[et,ei]=(0,t.useState)(""),[en,eu]=(0,t.useState)(""),[er,ed]=(0,t.useState)(!1),[em,ec]=(0,t.useState)(!1),[eh,eo]=(0,t.useState)(!1),[ep,ex]=(0,t.useState)(null),[ef,ek]=(0,t.useState)(null),[eS,ej]=(0,t.useState)(null),[eg,eb]=(0,t.useState)(null),[ev,ew]=(0,t.useState)(null),[eN,ey]=(0,t.useState)(null),[eM,eR]=(0,t.useState)(null),[eV,eE]=(0,t.useState)(!1),[eK,eZ]=(0,t.useState)(!1),[eq,ez]=(0,t.useState)(!1),[eD,eA]=(0,t.useState)(!1),[eC,e_]=(0,t.useState)(!1),[eH,eJ]=(0,t.useState)(!1),[eP,eT]=(0,t.useState)(!1),eB=async()=>{try{eo(!0);let e=JSON.parse(localStorage.getItem("menu")),a=e.find(e=>"Produk"===e.name),l=await i.Z.getSelectedAksesMenu(a.id);console.log(l),l&&m({...l}),eo(!1)}catch(e){eo(!1),console.log(e)}},eL=e=>{console.log("masuk bos",e);let a=[...O],l=[...I];a.splice(e,1),l.splice(e,1),F(a),U(l)},eO=e=>{let a=[...O],l=[...I];e.some(e=>{-1===a.findIndex(a=>a.name===e.name)&&(a.push(e),l.push(URL.createObjectURL(e)))}),F(a),U(l)},eF=async e=>{try{if(e.preventDefault(),ec(!0),eE(!1),eZ(!1),ez(!1),eA(!1),e_(!1),eT(!1),V().isLength(h,{min:3})){if(0===K.value.id)ej("Anda Harus Memilih Kategori"),ez(!0),ec(!1);else if(0===q.value.id)eb("Anda Harus Memilih Sub Kategori"),eA(!0),ec(!1);else if(Q.length){if(O.length<1)ey("Anda Harus Memasukkan Gambar Min:1"),ec(!1),eT(!0);else if(!el||et&&en){let e=new FormData;e.append("name",h),e.append("harga",(0,u.Z)(y)),e.append("idCategori",K.value.id),e.append("idSubCategori",q.value.id),e.append("deskripsi",C),e.append("color",D),e.append("type",H),e.append("jenisBahan",P),e.append("linkShoope",B),e.append("sale",el?0:1),et&&en?(e.append("startSale",(0,E.ZP)(et,"isoDate")),e.append("endSale",(0,E.ZP)(en,"isoDate"))):(e.append("startsale",""),e.append("endSale","")),e.append("status",W),Q.forEach(a=>{e.append("size[]",JSON.stringify(a))}),O.forEach(a=>{e.append("gambar[]",a)});let l=await (0,n.Ue)(e);l.status&&(a.fire({icon:"success",title:"Berhasil Menambahkan Produk"}),w(""),R(""),Z({value:{id:0,name:"silahkan Memilih Kategori"},label:"silahkan Memilih Kategori"}),z({value:{id:0,name:"silahkan Memilih Sub Kategori"},label:"silahkan Memilih Sub Kategori"}),_(""),A(""),J(""),T(""),L(""),F([]),U([]),X([]),$(""),ea("0"),es(0),ei(""),eu(""),ec(!1))}else eR("Tanggal Sale Harus Di Isi Terlebih Dahulu"),ec(!1),eJ(!0)}else ew("Anda harus menambahkan size terlebih dahulu"),e_(!0),ec(!1)}else ex("username minimal panjang 3 huruf"),ec(!1),eE(!0)}catch(e){ec(!1),a.fire({icon:"error",title:e})}};return(0,t.useEffect)(()=>{eB()},[]),(0,s.jsx)(s.Fragment,{children:eh?(0,s.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,s.jsx)(v.Z,{})}):l&&1===l.act_create?(0,s.jsxs)("div",{children:[(0,s.jsx)(g.Z,{title:"Create Produk"}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(c.D,{name:"kembali",action:()=>{e.replace("/dashboard/produk")}})}),(0,s.jsxs)("form",{onSubmit:eF,className:"w-full",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col md:flex-row md:gap-6",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)(r.y,{value:h,setValue:w,isRequire:!0,name:"Nama",placeholder:"name",id:"name",isError:eV,keterangan:ep}),(0,s.jsx)(f.a,{title:"Harga",value:y,setValue:R,isRequire:!0,isError:eK,keterangan:ef}),(0,s.jsx)(k.W,{value:K,setValue:Z,isError:eq,keterangan:eS}),0!==K.value.id&&(0,s.jsx)(S.i,{idKategori:K.value.id,value:q,setValue:z,isError:eD,keterangan:eg}),(0,s.jsx)(r.y,{value:D,setValue:A,name:"Warna",id:"warna",placeholder:"ex: hitam, jika tidak ada masukkan '-' ",isRequire:!0}),(0,s.jsx)(x.B,{value:C,setValue:_,name:"Deskripsi",id:"deskripsi",isRequire:!0,placeholder:"jika tidak ada masukkan '-'"}),(0,s.jsx)(r.y,{value:H,setValue:J,name:"Type",id:"type",isRequire:!0,placeholder:"jika tidak ada masukkan '-'"}),(0,s.jsx)(r.y,{value:P,setValue:T,name:"Jenis Bahan",id:"jenis bahan",placeholder:"ex: Katun, jika tidak ada masukkan '-'",isRequire:!0}),(0,s.jsx)(r.y,{value:B,setValue:L,name:"Link Shoope",id:"link shoope",isRequire:!0}),(0,s.jsx)(d.Z,{value:el,setValue:es,title:"Aktifkan Sale"},"aktifkanSale"),el?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{value:et,setValue:ei,name:"Tanggal Mulai Sale",isRequire:!0}),(0,s.jsx)(p.Z,{value:en,setValue:eu,name:"Tanggal Berakhir Sale",isRequire:!0}),eH&&(0,s.jsx)("p",{className:"text-sm text-red-500 mb-2",children:eM})]}):null]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)(o,{sizes:Q,nameSize:Y,jumlahSize:ee,setNameSize:$,SetJumlahSize:ea,handleAddSize:()=>{let e=[...Q];if(-1===e.findIndex(e=>e.name===Y)){let a={name:Y,jumlah:(0,u.Z)(ee)};e.push(a)}X(e),$(""),ea("0")},handleDeleteSize:e=>{let a=[...Q];a.splice(e,1),X(a)},isError:eC,keterangan:ev}),(0,s.jsx)(j.Z,{state:O,handleState:e=>{let a=Array.prototype.slice.call(e.target.files);eO(a)},isError:eP,keterangan:eN}),(0,s.jsx)("div",{className:"".concat(I.length?"p-4 bg-gray-400 rounded-lg my-6":"hidden"),children:(0,s.jsx)("ol",{className:"flex flex-col md:flex-row",children:[...I].map((e,a)=>(0,s.jsx)("li",{className:"block p-1 w-1/ h-full sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8",children:(0,s.jsx)("img",{onClick:()=>eL(a),alt:"upload preview",src:e,className:"img-preview w-full h-full sticky object-cover rounded-md bg-fixed"})},a))})})]})]}),(0,s.jsx)(c.D,{name:"Create",width:"w-full",isLoading:em,type:"submit"})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("span",{children:"Anda tidak memiliki akses"})})})}}},function(e){e.O(0,[750,698,589,401,319,245,452,971,596,744],function(){return e(e.s=3410)}),_N_E=e.O()}]);