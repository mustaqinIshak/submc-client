(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{1208:function(e,a,t){Promise.resolve().then(t.bind(t,7807))},4193:function(e,a,t){"use strict";t.d(a,{Jd:function(){return r},Md:function(){return i},N9:function(){return d},Ue:function(){return l},Z0:function(){return c},jx:function(){return n},yC:function(){return o}});var s=t(6979);async function r(e){try{let a=await (0,s.Z)({method:"post",url:"/getIndexProduk",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit,search:e.search}});return a.data.data}catch(t){let e=[];t.response.data.message&&e.push(t.response.data.message);let a=e.join("");throw a}}async function n(e){try{let a=await (0,s.Z)({method:"post",url:"/getSelectedProduk",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:e}});return a.data.data}catch(t){let e=[];t.response.data.id&&t.response.data.id.map(a=>{e.push(a)}),t.response.data.message&&e.push(t.response.data.message);let a=e.join("");throw a}}async function o(e){try{let a=await (0,s.Z)({method:"post",url:"/getIndexProduk",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit,search:e.search}});if(a.data.status)return a.data.data}catch(e){throw e}}async function i(e){try{let a=await (0,s.Z)({method:"post",url:"/getIndexProduk?page=".concat(e.number),headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit,search:e.search}});if(a.data.status)return a.data.data}catch(e){throw e}}async function l(e){try{let a=await (0,s.Z)({method:"post",url:"/createProduk",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:e});return a.data}catch(t){let e=[];t.response.data.name&&t.response.data.name.map(a=>{e.push(a)}),t.response.data.harga&&t.response.data.harga.map(a=>{e.push(a)}),t.response.data.idCategori&&t.response.data.idCategori.map(a=>{e.push(a)}),t.response.data.idSubCategori&&t.response.data.idSubCategori.map(a=>{e.push(a)}),t.response.data.deskripsi&&t.response.data.deskripsi.map(a=>{e.push(a)}),t.response.data.gambar&&t.response.data.gambar.map(a=>{e.push(a)}),t.response.data.linkShoope&&t.response.data.linkShoope.map(a=>{e.push(a)}),t.response.data.status&&t.response.data.status.map(a=>{e.push(a)}),t.response.data.message&&e.push(t.response.data.message);let a=e.join("");throw a}}async function d(e){try{let a=await (0,s.Z)({method:"post",url:"/updateProduk",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:e});return a.data}catch(t){let e=[];t.response.id.name&&t.response.id.name.map(a=>{e.push(a)}),t.response.data.name&&t.response.data.name.map(a=>{e.push(a)}),t.response.data.harga&&t.response.data.harga.map(a=>{e.push(a)}),t.response.data.idCategori&&t.response.data.idCategori.map(a=>{e.push(a)}),t.response.data.idSubCategori&&t.response.data.idSubCategori.map(a=>{e.push(a)}),t.response.data.deskripsi&&t.response.data.deskripsi.map(a=>{e.push(a)}),t.response.data.linkShoope&&t.response.data.linkShoope.map(a=>{e.push(a)}),t.response.data.status&&t.response.data.status.map(a=>{e.push(a)}),t.response.data.message&&e.push(t.response.data.message);let a=e.join("");throw a}}async function c(e){try{let a=await (0,s.Z)({method:"post",url:"/deleteProduk",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:e}});if(a.data.status)return a.data.data}catch(t){let e=[];t.response.id.name&&t.response.id.name.map(a=>{e.push(a)}),t.response.data.message&&e.push(t.response.data.message);let a=e.join("");throw a}}},7807:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var s=t(7437),r=t(2265),n=t(4280),o=t(9050),i=t(9046),l=t(6847),d=t(4033),c=t(6821),p=t(2510),u=t(1275),h=t(4193),m=t(5844),g=t(6820),x=t.n(g),f=t(7342),k=t.n(f),j=t(7987);function y(e){let{aksesEdit:a=0,aksesDelete:t=0}=e,n=(0,d.useRouter)(),o=k()(x()),[i,g]=(0,r.useState)([]),[f,y]=(0,r.useState)(1),[w,b]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),[C,A]=(0,r.useState)(10),[v,Z]=(0,r.useState)(0),[_,P]=(0,r.useState)(1),[B,I]=(0,r.useState)(1),[M,O]=(0,r.useState)(!1),z=(e,a)=>{o.fire({title:'Apakah anda yakin ingin menghapus produk ini dengan nama "'.concat(a,'" ?'),text:"Anda tidak bisa mengembalikan produk ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&(0,h.Z0)(e).then(()=>{O(!M),o.fire("Deleted!","Produk berhasil di hapus","success")},e=>{O(!M),o.fire({icon:"error",title:"Gagal Menghapus produk"})})})},E=e=>{n.replace("/dashboard/produk/detail/".concat(e))},G=async()=>{try{S(!0);let e=await (0,h.Jd)({limit:C});console.log(e),e.data.length&&(g([...e.data]),Z(e.total),P(e.from),I(e.last_page)),S(!1)}catch(e){S(!1),o.fire({icon:"error",title:"Gagal mengambil data user"})}},D=async()=>{try{S(!0);let e=await (0,h.yC)({limit:C,search:w});e.data.length&&(g([...e.data]),Z(e.total),P(e.from),I(e.last_page)),S(!1)}catch(e){S(!1),o.fire({icon:"error",title:"Gagal mengambil data user"})}},H=async()=>{if(f!==_)try{S(!0);let e=f-1;y(e);let a=await (0,h.Md)({limit:C,search:w,number:e});a.data.length&&(g([...a.data]),Z(a.total),I(a.last_page)),S(!1)}catch(e){S(!1),o.fire({icon:"error",title:"Gagal mengambil data produk"})}},L=async()=>{if(f!==B)try{S(!0);let e=f+1;y(e);let a=await (0,h.Md)({limit:C,search:w,number:e});a.data.length&&(g([...a.data]),Z(a.total),I(a.last_page)),S(!1)}catch(e){S(!1),o.fire({icon:"error",title:"Gagal mengambil data produk"})}},F=e=>(0,s.jsx)(s.Fragment,{children:1===e?(0,s.jsx)("svg",{className:"w-3 h-3 text-green-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 12",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 5.917 5.724 10.5 15 1.5"})}):(0,s.jsx)("svg",{className:"w-3 h-3 text-red-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})})}),J=async e=>{try{S(!0),y(e);let a=await (0,h.Md)({limit:C,search:w,number:e});a.data.length&&(g([...a.data]),Z(a.total),I(a.last_page)),S(!1)}catch(e){S(!1),o.fire({icon:"error",title:"Gagal mengambil data produk"})}};return(0,r.useEffect)(()=>{G()},[C,M]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:N?(0,s.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,s.jsx)(l.Z,{})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 lg:flex lg:flex-row  lg:justify-between mb-6",children:[(0,s.jsx)(m.M,{value:C,setValue:A,id:"limit"}),(0,s.jsx)(u.Z,{value:w,setValue:b,action:D})]}),(0,s.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Harga"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Kategori"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Sub Kategori"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Size"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Diskon"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Status Produk"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Aksi"})]})}),(0,s.jsx)("tbody",{children:i&&i.map((e,r)=>(0,s.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,s.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.name}),(0,s.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.harga?(0,c.Z)(e.harga):"0"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.kategori}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.subKategori}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.size}),(0,s.jsx)("td",{className:"px-6 py-4",children:F(e.diskon)}),(0,s.jsx)("td",{className:"px-6 py-4",children:F(e.statusProduk)}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[1===a&&(0,s.jsx)(p.mTE,{className:"text-yellow-500 text-xl",onClick:()=>E(e.id)}),1===t&&(0,s.jsx)(p.r9e,{className:"text-red-500 text-xl",onClick:()=>z(e.id,e.name)})]})})]},r))})]}),(0,s.jsx)(j.Z,{first:_,last:B,pageNumber:f,pageHandle:J,previousHandle:H,nextHandle:L})]})})})}function w(){let e=(0,d.useRouter)(),[a,t]=(0,r.useState)({}),[c,p]=(0,r.useState)(!1),u=async()=>{try{p(!0);let e=JSON.parse(localStorage.getItem("menu")),a=e.find(e=>"Produk"===e.name),s=await o.Z.getSelectedAksesMenu(a.id);console.log(s),s&&t({...s}),p(!1)}catch(e){p(!1),console.log(e)}};return(0,r.useEffect)(()=>{u()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{title:"Produk"}),c?(0,s.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,s.jsx)(l.Z,{})}):a&&1===a.act_read?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[a&&1===a.act_create&&(0,s.jsx)("div",{className:"w-full flex justify-start mb-6",children:(0,s.jsx)(i.D,{name:"Tambah Produk",action:()=>{e.replace("/dashboard/produk/create")}})}),(0,s.jsx)(y,{aksesDelete:a.act_delete,aksesEdit:a.act_update})]}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("span",{children:"Anda tidak memiliki akses"})})]})}},6821:function(e,a,t){"use strict";function s(e){if(e){var a=(e+="").replace(/[^,\d]/g,"").toString().split(","),t=a[0].length%3,s=a[0].substr(0,t),r=a[0].substr(t).match(/\d{3}/gi);return r&&(s+=(t?".":"")+r.join(".")),s=void 0!==a[1]?s+","+a[1]:s}}t.d(a,{Z:function(){return s}})}},function(e){e.O(0,[306,750,698,885,971,596,744],function(){return e(e.s=1208)}),_N_E=e.O()}]);