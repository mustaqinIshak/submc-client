(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{6868:function(e,t,a){Promise.resolve().then(a.bind(a,1549))},2175:function(e,t,a){"use strict";a.d(t,{Md:function(){return n},U2:function(){return l},Ue:function(){return o},d0:function(){return r},eP:function(){return i},ey:function(){return c}});var s=a(6979);async function r(){try{let e=await (0,s.Z)({method:"post",url:"getAllRoleUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.data.status)return e.data.data;throw e.data.message}catch(e){throw e}}async function l(e){try{if(e.search){let t=await (0,s.Z)({method:"post",url:"getRoleUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit,search:e.search}});if(t.data.status)return t.data.data}else{let t=await (0,s.Z)({method:"post",url:"getRoleUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit}});if(t.data.status)return t.data.data;throw t.data.message}}catch(e){throw e}}async function n(e){try{let t=await (0,s.Z)({method:"post",url:"/getRoleUser?page=".concat(e.number),headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:e.limit,search:e.search}});if(t.data.status)return t.data.data;throw t.data.message}catch(e){throw e}}async function c(e){try{let t=await (0,s.Z)({method:"post",url:"getSelectedRoleUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:e}});if(t.data.status)return t.data.data;throw t.data.message}catch(a){let e=[];a.response.data.id&&a.response.data.id.map(t=>{e.push(t)});let t=e.join("");throw t}}async function o(e){try{let t=await (0,s.Z)({method:"post",url:"createRoleUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:e});return t.data.status}catch(a){let e=[];a.response.data.name&&a.response.data.name.map(t=>{e.push(t)}),a.response.data.aksesMenu&&a.response.data.aksesMenu.map(t=>{e.push(t)});let t=e.join("");throw t}}async function i(e){try{let t=await (0,s.Z)({method:"post",url:"editRoleUser",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:e});if(t.data.status)return t.data.status;throw t.data.message}catch(a){let e=[];a.response.data.name&&a.response.data.name.map(t=>{e.push(t)}),a.response.data.aksesMenu&&a.response.data.aksesMenu.map(t=>{e.push(t)});let t=e.join("");throw t}}},1549:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(7437),r=a(2265),l=a(9050),n=a(2510),c=a(2175),o=a(5844),i=a(1275),d=a(6820),u=a.n(d),h=a(7342),m=a.n(h),g=a(6847),f=a(7987),p=a(4033);function x(e){let{aksesEdit:t=0,aksesDelete:a=0}=e,l=(0,p.useRouter)(),d=m()(u()),[h,x]=(0,r.useState)([]),[y,w]=(0,r.useState)(1),[j,b]=(0,r.useState)(!1),[k,A]=(0,r.useState)(10),[N,S]=(0,r.useState)(0),[v,U]=(0,r.useState)(1),[_,Z]=(0,r.useState)(1),[M,R]=(0,r.useState)(!1),[C,O]=(0,r.useState)(""),I=e=>{l.replace("/dashboard/roleUser/edit/".concat(e))},z=async()=>{try{b(!0);let e=await (0,c.U2)({limit:k});e.data.length&&(x([...e.data]),S(e.total),U(e.from),Z(e.last_page)),b(!1)}catch(e){b(!1),d.fire({icon:"error",title:"Gagal mengambil data user"})}},B=async()=>{try{b(!0);let e=await (0,c.U2)({limit:k,search:C});e.data.length&&(x([...e.data]),S(e.total),U(e.from),Z(e.last_page)),b(!1)}catch(e){b(!1),d.fire({icon:"error",title:"Gagal mengambil data user"})}},E=async()=>{if(y!==v)try{b(!0);let e=y-1;w(e);let t=await (0,c.Md)({limit:k,search:C,number:e});t.data.length&&(x([...t.data]),S(t.total),Z(t.last_page)),b(!1)}catch(e){b(!1),d.fire({icon:"error",title:"Gagal mengambil data role user"})}},G=async()=>{if(y!==_)try{b(!0);let e=y+1;w(e);let t=await (0,c.Md)({limit:k,search:C,number:e});t.data.length&&(x([...t.data]),S(t.total),Z(t.last_page)),b(!1)}catch(e){b(!1),d.fire({icon:"error",title:"Gagal mengambil data role user"})}},H=async e=>{try{b(!0),w(e);let t=await (0,c.Md)({limit:k,search:C,number:e});t.data.length&&(x([...t.data]),S(t.total),Z(t.last_page)),b(!1)}catch(e){b(!1),d.fire({icon:"error",title:"Gagal mengambil data role user"})}};return(0,r.useEffect)(()=>{z()},[k,M]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:j?(0,s.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,s.jsx)(g.Z,{})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 lg:flex lg:flex-row  lg:justify-between mb-6",children:[(0,s.jsx)(o.M,{value:k,setValue:A,id:"limit"}),(0,s.jsx)(i.Z,{value:C,setValue:O,action:B})]}),(0,s.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Menu"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Aksi"})]})}),(0,s.jsx)("tbody",{children:h&&h.map((e,a)=>(0,s.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.menu}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"flex gap-3",children:1===t&&(0,s.jsx)(n.mTE,{className:"text-yellow-500 text-xl",onClick:()=>I(e.id)})})})]},a))})]}),(0,s.jsx)(f.Z,{first:v,last:_,pageNumber:y,pageHandle:H,previousHandle:E,nextHandle:G})]})})})}var y=a(9046),w=a(4280);function j(){let e=(0,p.useRouter)(),[t,a]=(0,r.useState)({}),[n,c]=(0,r.useState)(!1),o=async()=>{try{c(!0);let e=JSON.parse(localStorage.getItem("menu")),t=e.find(e=>"User"===e.name),s=await l.Z.getSelectedAksesMenu(t.id);console.log(s),s&&a({...s}),c(!1)}catch(e){c(!1),console.log(e)}};return(0,r.useEffect)(()=>{o()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{title:"Role User"}),n?(0,s.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,s.jsx)(g.Z,{})}):t&&1===t.act_read?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsxs)("div",{className:"w-full flex justify-start mb-6",children:[(0,s.jsx)(y.D,{name:"Kembali",action:()=>{e.replace("/dashboard/user")}}),t&&1===t.act_create&&(0,s.jsx)(y.D,{name:"Tambah Role User",action:()=>{e.replace("/dashboard/roleUser/create")}})]}),(0,s.jsx)(x,{aksesEdit:t.act_update})]}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("span",{children:"Anda tidak memiliki akses"})})]})}}},function(e){e.O(0,[306,750,698,885,971,596,744],function(){return e(e.s=6868)}),_N_E=e.O()}]);