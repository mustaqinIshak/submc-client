(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{9002:function(e,a,t){Promise.resolve().then(t.bind(t,1670))},1670:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return x}});var i=t(7437),s=t(2265),l=t(4033),n=t(9050),r=t(1086),u=t(3002),c=t(9046),o=t(2304),d=t(6847),m=t(4280),h=t(6820),f=t.n(h),b=t(7342),g=t.n(b),k=t(4589),j=t.n(k);function x(){let e=(0,l.useRouter)(),a=g()(f()),[t,h]=(0,s.useState)({}),[b,k]=(0,s.useState)({value:{id:0,name:"silahkan Memilih Kategori"},label:"silahkan Memilih Kategori"}),[x,v]=(0,s.useState)(""),[S,p]=(0,s.useState)(null),[y,K]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[_,M]=(0,s.useState)(!1),E=async()=>{try{M(!0);let e=JSON.parse(localStorage.getItem("menu")),a=e.find(e=>"Kategori"===e.name),t=await n.Z.getSelectedAksesMenu(a.id);t&&h({...t}),M(!1)}catch(e){M(!1),console.log(e)}},C=async e=>{e.preventDefault(),w(!0);try{if(p(null),j().isLength(x,{min:3})){if(/select|insert|update|delete|drop table|create table|alter table/i.test(x))p("name tidak bisa berupa SQL"),w(!1),K(!0);else if(0===b.value.id)w(!1),a.fire({icon:"error",title:"Anda harus memilih kategori terlebih dahulu"});else{let e={idCategori:b.value.id,name:x},t=await (0,r.Ue)(e);t&&(a.fire({icon:"success",title:"Berhasil Menambahkan Sub Kategori"}),v(""),k({value:{id:0,name:"silahkan Memilih Kategori"},label:"silahkan Memilih Kategori"}))}}else p("name minimal panjang 3 huruf"),w(!1),K(!0);w(!1)}catch(e){w(!1),a.fire({icon:"error",title:e})}};return(0,s.useEffect)(()=>{E()},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)(m.Z,{title:"Create Sub Kategori"}),_?(0,i.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,i.jsx)(d.Z,{})}):t&&1===t.act_create?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)(c.D,{name:"kembali",action:()=>{e.replace("/dashboard/subKategori")}})}),(0,i.jsxs)("form",{onSubmit:C,children:[(0,i.jsx)(o.W,{value:b,setValue:k}),(0,i.jsx)(u.y,{name:"Name",value:x,setValue:v,isError:y,keterangan:S}),(0,i.jsx)(c.D,{type:"submit",name:"create",width:"w-64",isLoading:N})]})]}):(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)("span",{children:"Anda tidak memiliki akses"})})]})}}},function(e){e.O(0,[750,698,589,401,319,245,971,596,744],function(){return e(e.s=9002)}),_N_E=e.O()}]);