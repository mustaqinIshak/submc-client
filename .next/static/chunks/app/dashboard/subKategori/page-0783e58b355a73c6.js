(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{1543:function(t,e,a){Promise.resolve().then(a.bind(a,6295))},1086:function(t,e,a){"use strict";a.d(e,{Md:function(){return l},Ue:function(){return c},eP:function(){return d},ey:function(){return o},go:function(){return i},rw:function(){return s},wz:function(){return u},yC:function(){return n}});var r=a(6979);async function s(t){try{let e=await (0,r.Z)({method:"post",url:"/getIndexSubCategori",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:t}});if(e.data.status)return e.data.data;throw e.data}catch(e){e.response.data.id&&e.response.data.id.map(e=>{t.push(e)});let t=[];throw e.message&&t.push(t),t}}async function i(t){try{let e=await (0,r.Z)({method:"post",url:"/getAllSubCategori",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:t.limit}});if(e.data.status)return e.data.data;throw e.data}catch(e){let t=[];throw e.response.data.limit&&e.response.data.limit.map(e=>{t.push(e)}),e.message&&t.push(t),t}}async function n(t){try{let e=await (0,r.Z)({method:"post",url:"/getAllSubCategori",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:t.limit}});if(e.data.status)return e.data.data;throw e.data}catch(e){let t=[];throw e.response.data.limit&&e.response.data.limit.map(e=>{t.push(e)}),e.message&&t.push(t),t}}async function o(t){try{let e=await (0,r.Z)({method:"post",url:"/getSelectedSubCategori",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:t}});if(e.data.status)return e.data.data;throw e.data}catch(e){let t=[];throw e.response.data.id&&e.response.data.id.map(e=>{t.push(e)}),e.message&&t.push(t),t}}async function l(t){try{let e=await (0,r.Z)({method:"post",url:"/getAllSubCategori?page=".concat(t.number),headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{limit:t.limit,search:t.search}});if(e.data.status)return e.data.data;throw e.data}catch(e){let t=[];throw e.response.data.id&&e.response.data.id.map(e=>{t.push(e)}),e.message&&t.push(t),t}}async function c(t){try{let e=await (0,r.Z)({method:"post",url:"/createSubCategori",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{idCategori:t.idCategori,name:t.name}});return e.data}catch(a){let t=[];a.response.data.idCategori&&a.response.data.idCategori.map(e=>{t.push(e)}),a.response.data.name&&a.response.data.name.map(e=>{t.push(e)});let e=t.join("");throw e}}async function d(t){try{let e=await (0,r.Z)({method:"post",url:"/updateSubCategori",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:t.id,idCategori:t.idCategori,name:t.name}});return e.data}catch(a){let t=[];a.response.data.id&&a.response.data.id.map(e=>{t.push(e)}),a.response.data.idCategori&&a.response.data.idCategori.map(e=>{t.push(e)}),a.response.data.name&&a.response.data.name.map(e=>{t.push(e)});let e=t.join("");throw e}}async function u(t){try{let e=await (0,r.Z)({method:"post",url:"/deleteSubCategori",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{id:t}});return e.data}catch(a){let t=[];a.response.data.id&&a.response.data.id.map(e=>{t.push(e)});let e=t.join("");throw e}}},6295:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return b}});var r=a(7437),s=a(2265),i=a(9050),n=a(4033),o=a(9046),l=a(4280),c=a(6847),d=a(2510),u=a(1275),h=a(1086),g=a(5844),m=a(6820),p=a.n(m),f=a(7342),x=a.n(f),w=a(7987);function y(t){let{aksesEdit:e=0,aksesDelete:a=0}=t,i=(0,n.useRouter)(),o=x()(p()),[l,m]=(0,s.useState)([]),[f,y]=(0,s.useState)(1),[b,j]=(0,s.useState)(""),[k,C]=(0,s.useState)(!1),[A,S]=(0,s.useState)(10),[N,v]=(0,s.useState)(0),[_,Z]=(0,s.useState)(1),[B,O]=(0,s.useState)(1),[z,I]=(0,s.useState)(!1),E=(t,e)=>{o.fire({title:'Apakah anda yakin ingin menghapus data ini dengan nama "'.concat(e,'" ?'),text:"Anda tidak bisa mengembalikan data ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!"}).then(e=>{e.isConfirmed&&(0,h.wz)(t).then(()=>{I(!z),o.fire("Deleted!","Data berhasil di hapus","success")},t=>{I(!z),o.fire({icon:"error",title:"Gagal Menghapus kategori"})})})},K=t=>{i.replace("/dashboard/subKategori/edit/".concat(t))},M=async()=>{try{C(!0);let t=await (0,h.go)({limit:A});t.data.length&&(m([...t.data]),v(t.total),Z(t.from),O(t.last_page)),C(!1)}catch(t){C(!1),console.log(t),o.fire({icon:"error",title:"Gagal mengambil sub kategori"})}},G=async()=>{try{C(!0);let t=await (0,h.yC)({limit:A,search:b});t.data.length&&(m([...t.data]),v(t.total),Z(t.from),O(t.last_page)),C(!1)}catch(t){C(!1),o.fire({icon:"error",title:"Gagal mengambil kategori"})}},D=async()=>{if(f!==_)try{C(!0);let t=f-1;y(t);let e=await (0,h.Md)({limit:A,search:b,number:t});e.data.length&&(m([...e.data]),v(e.total),O(e.last_page)),C(!1)}catch(t){C(!1),o.fire({icon:"error",title:"Gagal mengambil kategori"})}},H=async()=>{if(f!==B)try{C(!0);let t=f+1;y(t);let e=await (0,h.Md)({limit:A,search:b,number:t});e.data.length&&(m([...e.data]),v(e.total),O(e.last_page)),C(!1)}catch(t){C(!1),o.fire({icon:"error",title:"Gagal mengambil kategori"})}},T=async t=>{try{C(!0),y(t);let e=await (0,h.Md)({limit:A,search:b,number:t});e.data.length&&(m([...e.data]),v(e.total),O(e.last_page)),C(!1)}catch(t){C(!1),o.fire({icon:"error",title:"Gagal mengambil kategori"})}};return(0,s.useEffect)(()=>{M()},[A,z]),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"w-full overflow-x-auto",children:k?(0,r.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,r.jsx)(c.Z,{})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-6 lg:flex lg:flex-row  lg:justify-between mb-6",children:[(0,r.jsx)(g.M,{value:A,setValue:S,id:"limit"}),(0,r.jsx)(u.Z,{value:b,setValue:j,action:G})]}),(0,r.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Nama"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Kategori"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Aksi"})]})}),(0,r.jsx)("tbody",{children:l&&l.map((t,s)=>(0,r.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,r.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:t.name}),(0,r.jsx)("td",{className:"px-6 py-4",children:t.kategori}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[1===e&&(0,r.jsx)(d.mTE,{className:"text-yellow-500 text-xl",onClick:()=>K(t.id)}),1===a&&(0,r.jsx)(d.r9e,{className:"text-red-500 text-xl",onClick:()=>E(t.id,t.name)})]})})]},s))})]}),(0,r.jsx)(w.Z,{first:_,last:B,pageNumber:f,pageHandle:T,previousHandle:D,nextHandle:H})]})})})}function b(){let t=(0,n.useRouter)(),[e,a]=(0,s.useState)({}),[d,u]=(0,s.useState)(!1),h=async()=>{try{u(!0);let t=JSON.parse(localStorage.getItem("menu")),e=t.find(t=>"Kategori"===t.name),r=await i.Z.getSelectedAksesMenu(e.id);console.log(r),r&&a({...r}),u(!1)}catch(t){u(!1),console.log(t)}};return(0,s.useEffect)(()=>{h()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Z,{title:"Sub Kategori"}),d?(0,r.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,r.jsx)(c.Z,{})}):e&&1===e.act_read?(0,r.jsxs)("div",{className:"",children:[e&&1===e.act_create&&(0,r.jsxs)("div",{className:"w-full flex justify-start mb-6",children:[(0,r.jsx)(o.D,{name:"Tambah sub Kategori",action:()=>{t.replace("/dashboard/subKategori/create")}}),(0,r.jsx)(o.D,{name:"Kembali",action:()=>{t.replace("/dashboard/kategori")}})]}),(0,r.jsx)(y,{aksesDelete:e.act_delete,aksesEdit:e.act_update})]}):(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("span",{children:"Anda tidak memiliki akses"})})]})}}},function(t){t.O(0,[306,750,698,885,971,596,744],function(){return t(t.s=1543)}),_N_E=t.O()}]);