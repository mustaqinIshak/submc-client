(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{5502:function(e,t,a){Promise.resolve().then(a.bind(a,4942))},4942:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var i=a(7437),s=a(2265),n=a(4033),l=a(9050),r=a(1086),u=a(3002),c=a(9046),d=a(2304),o=a(6847),m=a(4280),f=a(6820),h=a.n(f),g=a(7342),b=a.n(g),k=a(4589),j=a.n(k);function x(e){let{params:t}=e,a=(0,n.useRouter)(),f=b()(h()),[g,k]=(0,s.useState)({}),[x,S]=(0,s.useState)(""),[v,p]=(0,s.useState)({value:{id:0,name:"silahkan Memilih Kategori"},label:"silahkan Memilih Kategori"}),[y,w]=(0,s.useState)(""),[N,_]=(0,s.useState)(null),[E,K]=(0,s.useState)(!1),[M,A]=(0,s.useState)(!1),[C,D]=(0,s.useState)(!1),L=async()=>{try{D(!0);let e=JSON.parse(localStorage.getItem("menu")),a=e.find(e=>"Kategori"===e.name),i=await l.Z.getSelectedAksesMenu(a.id);if(i){k({...i});let e=await (0,r.ey)(t.id);e&&(S(e.id),w(e.name),p({value:{id:e.id_categori,name:e.kategori},label:e.kategori}))}D(!1)}catch(e){D(!1),console.log(e)}},O=async e=>{e.preventDefault(),A(!0);try{if(_(null),j().isLength(y,{min:3})){if(/select|insert|update|delete|drop table|create table|alter table/i.test(y))_("name tidak bisa berupa SQL"),A(!1),K(!0);else if(0===v.value.id)A(!1),f.fire({icon:"error",title:"Anda harus memilih kategori terlebih dahulu"});else{let e={id:x,idCategori:v.value.id,name:y},t=await (0,r.eP)(e);t&&f.fire({icon:"success",title:"Berhasil Mengubah Sub Kategori"})}}else _("name minimal panjang 3 huruf"),A(!1),K(!0);A(!1)}catch(e){A(!1),f.fire({icon:"error",title:e})}};return(0,s.useEffect)(()=>{L()},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)(m.Z,{title:"Edit Sub Kategori"}),C?(0,i.jsx)("div",{className:"flex w-full h-full items-center justify-center",children:(0,i.jsx)(o.Z,{})}):g&&1===g.act_create?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)(c.D,{name:"kembali",action:()=>{a.replace("/dashboard/kategori")}})}),(0,i.jsxs)("form",{onSubmit:O,children:[(0,i.jsx)(d.W,{value:v,setValue:p}),(0,i.jsx)(u.y,{name:"Name",value:y,setValue:w,isError:E,keterangan:N}),(0,i.jsx)(c.D,{type:"submit",name:"Edit",width:"w-64",isLoading:M})]})]}):(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)("span",{children:"Anda tidak memiliki akses"})})]})}}},function(e){e.O(0,[750,698,589,401,319,245,971,596,744],function(){return e(e.s=5502)}),_N_E=e.O()}]);